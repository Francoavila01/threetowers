<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- css bootstrapt -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <!-- css bootstrapt -->
     <link rel="stylesheet" href="css/borrador1.css">
    <!-- LINKS -->    
   <link rel="stylesheet" href="index.html">
   <link rel="stylesheet" href="alertas.html">
   <link rel="stylesheet" href="">
   <!-- LINKS -->
    
   <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

   <style>
    .contenedor {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        padding-top: 50px;
        
    }
    canvas {
        max-width: 40%;
        height: 400px;
    }
</style>
</head>


<body style="background-color:rgb(30 30 30)">

<!-- HEDER -->
    <header style="background-color:rgb(48, 48, 48) ; height: 48px;" class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between  ">

      <div href="/" class="col d-flex align-items-center  mb-2 mb-md-0 text-light ">
        <!-- logo -->
        <img class="logo mx-4 mb-1" src="imagen/2torres 3d v2.PNG" alt="" height="40px" width="55px" >
          <h2 class=""><link href="index.html">AIR & DATA</link></h1>
      </div>

<!-- Modal INICIO-->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" >
    <div class="modal-content color2 colortext " style="height: 616px; padding: 20px; ">

      <div class="modal-header">
        <img class="logo mx-3" src="imagen/2torres 3d v2.PNG" alt="" height="40px" width="55px" >
        <h1 class="modal-title fs-2" id="exampleModalLabel">AIR & DATA</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

     
    </div>
  </div>
</div>
<!-- Modal REGISTRO-->

    </header>
<!-- HEDER -->


<!-- NAV BAR -->
<nav class="nav nav-underline justify-content-between">
  <div class="modal fade" id="exampleModal7" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ingrese numero de serie del dataloger</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p></p>
          <form class="mt-4">
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label p6">NÂ° de serie de tu dispositivo</label>
              <input type="email" class="form-control color3 border-dark" placeholder="N-nzt42" id="exampleInputEmail1" aria-describedby="emailHelp">
              <div id="emailHelp" class="form-text">el codigo sirve para que puedas acceder al datalogger desde la web.</div>
            </div>
        </div>
        <div class="modal-footer ">
          <button type="button" class="btn btn-secondary text-light" data-bs-dismiss="modal">Cerrar</button>
          <button type="button" class="btn btn-secondary text-light">guardar</button>
        </div>
      </div>
    </div>
  </div>   
      <button type="button" class="btn btn-darck btn4" data-bs-toggle="modal" data-bs-target="#exampleModal7" >
    <a class="nav-item nav-link link-body-emphasis" href=""></a>
    <svg width="35px" height="35px" viewBox="-9.36 -9.36 42.72 42.72" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#e2e8f0" stroke-width="0.00024000000000000003" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)"><rect x="-9.36" y="-9.36" width="42.72" height="42.72" rx="13.2432" fill="#2371d7" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g><g id="SVGRepo_iconCarrier"> <path d="M12.75 9C12.75 8.58579 12.4142 8.25 12 8.25C11.5858 8.25 11.25 8.58579 11.25 9L11.25 11.25H9C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75H11.25V15C11.25 15.4142 11.5858 15.75 12 15.75C12.4142 15.75 12.75 15.4142 12.75 15L12.75 12.75H15C15.4142 12.75 15.75 12.4142 15.75 12C15.75 11.5858 15.4142 11.25 15 11.25H12.75V9Z" fill="#e2e8f0"></path><title>AGREGAR</title> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12C1.25 17.9371 6.06294 22.75 12 22.75C17.9371 22.75 22.75 17.9371 22.75 12C22.75 6.06294 17.9371 1.25 12 1.25ZM2.75 12C2.75 6.89137 6.89137 2.75 12 2.75C17.1086 2.75 21.25 6.89137 21.25 12C21.25 17.1086 17.1086 21.25 12 21.25C6.89137 21.25 2.75 17.1086 2.75 12Z" fill="#e2e8f0"></path> </g></svg>
      </button>

      <a class="nav-item nav-link link-body-emphasis  href="borrador1.html"></a>
       <button  class="btn btn4 " >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25px" height="25px" viewBox="0,0,256,256">
          <g fill="#e2e8f0" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><title>CASA</title><path d="M12,2c-0.26712,0.00003 -0.52312,0.10694 -0.71094,0.29688l-10.08594,8.80078c-0.12774,0.09426 -0.20313,0.24359 -0.20312,0.40234c0,0.27614 0.22386,0.5 0.5,0.5h2.5v8c0,0.552 0.448,1 1,1h4c0.552,0 1,-0.448 1,-1v-6h4v6c0,0.552 0.448,1 1,1h4c0.552,0 1,-0.448 1,-1v-8h2.5c0.27614,0 0.5,-0.22386 0.5,-0.5c0.00001,-0.15876 -0.07538,-0.30808 -0.20312,-0.40234l-10.08008,-8.79492c-0.00194,-0.00196 -0.0039,-0.00391 -0.00586,-0.00586c-0.18782,-0.18994 -0.44382,-0.29684 -0.71094,-0.29687z"></path></g></g></svg>
      </a>  
      </button>

      <a class="nav-item nav-link link-body-emphasis" href="alertas.html">
      <button class="btn btn4">
        <svg width="20px" height="20px" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>NOTIFICACIONES</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set-Filled" sketch:type="MSLayerGroup" transform="translate(-415.000000, -882.000000)" fill="#e2e8f0"> <path d="M440.021,883.289 C435.258,880.604 429.167,882.197 426.417,886.85 L422.434,893.589 L415.001,898.383 L424.336,903.646 C424.129,904.055 424,904.511 424,905 C424,906.657 425.343,908 427,908 C428.074,908 429.01,907.431 429.54,906.581 L439.148,912 L439.683,903.315 L443.666,896.576 C446.416,891.924 444.784,885.976 440.021,883.289" id="bell" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>       
      </a>
      </button>

      <a class="nav-item nav-link link-body-emphasis" href="index.html">
      <button class="btn ">
        <svg  width="25px" height="25px" viewBox="0 0 32.00 32.00" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>SALIR</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke-width="3.2" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set" sketch:type="MSLayerGroup" transform="translate(-412.000000, -933.000000)" fill="#e2e8f0"> <path d="M438,957 C438,958.104 437.104,959 436,959 L416,959 C414.896,959 414,958.104 414,957 L414,937 C414,935.896 414.896,935 416,935 L436,935 C437.104,935 438,935.896 438,937 L438,940 L440,940 L440,937 C440,934.791 438.209,933 436,933 L416,933 C413.791,933 412,934.791 412,937 L412,957 C412,959.209 413.791,961 416,961 L436,961 C438.209,961 440,959.209 440,957 L440,954 L438,954 L438,957 L438,957 Z M443,946 L421.414,946 L426.657,940.757 C427.048,940.367 427.048,939.733 426.657,939.343 C426.267,938.952 425.633,938.952 425.242,939.343 L418.343,946.242 C418.135,946.451 418.046,946.728 418.06,947 C418.046,947.272 418.135,947.549 418.343,947.758 L425.242,954.657 C425.633,955.048 426.267,955.048 426.657,954.657 C427.048,954.267 427.048,953.633 426.657,953.242 L421.414,948 L443,948 C443.553,948 444,947.553 444,947 C444,946.448 443.553,946 443,946 L443,946 Z" id="arrow-left" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>
      </a>
      </button>
</nav>
<!-- NAV BAR -->


<!-- contenido -->
<div class="container-fluid ">
 <div class="row text-light ">



<!-- seccion 1 -->
    <div class="container mt-4 text-center">
<!-- HEADER -->
      <header class="text-start">
        <h2 class="text-light">Hola Usuario!</h2>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill itemscolor" viewBox="0 0 16 16">
          <TItle>CASA</TItle>
          <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
          <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/>
        </svg>
        <a>Home > Datalogger NÂº1 - <cite title="NÂºSerie">Serie MHC-V7D </cite><svg style="color: rgba(0, 255, 60, 0.58);" xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
          <circle cx="8" cy="8" r="8"/>
        </svg> </a>
      </header>
<!-- HEADER -->


<!-- CARTAS 1-->
      <div class="container mt-5" >
        <div class="row mx-5">
        <!-- CARTA 1 -->
       <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 mx-xxl-5 mx-xl-0 style="height: 600px;>
        <h1>HOY<hr></h1>
        <div class="row">
          <div class="col-6 mt-4 responsivo"><h1>TEMPERATURA</h1><p id="mqtt-data-1">Esperando datos...</p></div>
          <div class="col-6 mt-4 responsivo"><h1>HUMEDAD</h1><p id="mqtt-data-2">Esperando datos...</p></div>
          <div class="col-12 mt-4 "><h1>ALERTAS</h1><h6>0</h6></div>
          
        </div>

       </div>
       
      </div>
    
        <!-- CARTA 2 -->
      </div>
<!-- CARTAS -->
</div>


<!-- CUADROS 
<div class=" contenedor mt-5">
  <canvas class="mx-3" id="grafico1"></canvas>
  <canvas class="mx-3" id="grafico2"></canvas>
</div>
-->


 <!-- CONTENT -->
 <div class="container mt-5 text-light" style="width: 900px;">
  <h1 class="text-center mb-4 mt-5">Dias Anteriores</h1>
  <hr>
  <!-- MenÃº de navegaciÃ³n lateral -->
  <div class="row mt-4">
      <div class="col-md-3">
          <div class="list-group">
              <a href="#perfil" class="list-group-item list-group-item-action bg-dark text-light " data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#perfil">
                  Ayer
              </a>
              <a href="#notificaciones" class="list-group-item list-group-item-action bg-dark text-light " data-bs-toggle="collapse"aria-expanded="false" data-bs-target="#notificaciones">
                  Hace Dos Dias
              </a>
             
          </div>
      </div>

      <!-- Contenido principal -->
      <div class="col-md-9">
          <!-- SecciÃ³n de Perfil -->
          <div id="perfil" class="collapse show text-center mt-4">
              <h5>TEMPERATURA / HUMEDAD</h5>
              <p>hace 1 dia</p>
             <!-- <p>MAXIMA - MINIMA / HUMEDAD</p>-->
              <div class="container mt-4">
                <div class="row ju">
                  <div class="col-4"><p>Maxima</p><h5>28Â°</H5></div>
                  <div class="col-4"><p>Minima</p><h5>24Â°</H5></div>
                  <div class="col-4"><p>Humedad</p><h5>50%</H5></div>
                </div>
              </div>
          </div>

          <!-- SecciÃ³n de Notificaciones -->
          <div id="notificaciones" class="collapse  mt-4">
              <!-- SecciÃ³n de Perfil -->
          <div id="perfil" class="collapse show text-center">
            <h5>TEMPERATURA / HUMEDAD</h5>
            <p>hace 2 dia</p>
           <!-- <p>MAXIMA - MINIMA / HUMEDAD</p>-->
            <div class="container mt-4">
              <div class="row">
                <div class="col-4"><p>Maxima</p><h5>-</H5></div>
                <div class="col-4"><p>Minima</p><h5>-</H5></div>
                <div class="col-4"><p>Humedad</p><h5>-</H5></div>
              </div>
            </div>
        </div>
          </div>

          <!-- SecciÃ³n de Seguridad -->
          <div id="seguridad" class="collapse">
              <h2>ConfiguraciÃ³n de Seguridad</h2>
              <p>Mejora la seguridad de tu cuenta activando opciones adicionales de protecciÃ³n.</p>
              <form>
                  <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="autenticacionDoble">
                      <label class="form-check-label" for="autenticacionDoble">
                          Activar autenticaciÃ³n de dos factores
                      </label>
                      <small class="form-text text-muted">AÃ±ade una capa extra de seguridad a tu cuenta.</small>
                  </div>
                  <div class="mb-3">
                      <label for="contrasena" class="form-label">ContraseÃ±a</label>
                      <input type="password" class="form-control" id="contrasena" placeholder="Ingrese su nueva contraseÃ±a">
                      <small class="form-text text-muted">AsegÃºrate de usar una contraseÃ±a segura.</small>
                  </div>
                  <div class="mb-3">
                      <label for="confirmarContrasena" class="form-label">Confirmar ContraseÃ±a</label>
                      <input type="password" class="form-control" id="confirmarContrasena" placeholder="Confirme su nueva contraseÃ±a">
                  </div>
                  <button type="submit" class="btn btn-primary mt-3">Guardar Cambios</button>
              </form>
          </div>

          

          
         
      </div>
  </div>
</div>
<!-- CONTENT -->
<!-- PIE DE PAGINA -->
<footer class="col-auto col-lg-12 col-sm-12 my-5 text-center" >Â© 2024 Air&Data Company, Inc. "Air&Data" y el diseÃ±o son marcas comerciales registradas de Air&DATA, Inc. Todos los derechos reservados.
  <br>
  <a>TÃ©rminos de uso</a> | <a>PolÃ­tica de privacidad</a> | <a>PolÃ­tica de cookies</a>
</footer>
<!-- PIE DE PAGINA -->








<!-- topicos -->
<script>
  // ConfiguraciÃ³n del broker MQTT (WSS para conexiÃ³n segura)
  const broker = "wss://d99cd1ef1f5d48c193befdb36bbe9a44.s1.eu.hivemq.cloud:8884/mqtt";
  const username = "Museo";
  const password = "Sarmiento1";
  const topic1 = "esp32/temperatura"; // Primer tÃ³pico
  const topic2 = "esp32/humedad"; // Segundo tÃ³pico

  // Configurar la conexiÃ³n con credenciales
  const client = mqtt.connect(broker, {
      username: username,
      password: password,
      reconnectPeriod: 5000, // Reintentar conexiÃ³n cada 5 segundos
      connectTimeout: 30 * 1000, // Tiempo de espera de conexiÃ³n: 30 segundos
  });

  // ConexiÃ³n exitosa
  client.on("connect", () => {
      console.log("âœ… Conectado a HiveMQ Cloud");
      
      // Suscribirse a los dos tÃ³picos
      client.subscribe([topic1, topic2], (err) => {
          if (!err) {
              console.log(`ðŸ“¡ Suscrito a: ${topic1}, ${topic2}`);
          } else {
              console.error("âŒ Error al suscribirse:", err);
          }
      });
  });

  // Manejar la recepciÃ³n de mensajes y actualizar el HTML
  client.on("message", (topic, message) => {
      console.log(`ðŸ“© Mensaje recibido en ${topic}: ${message.toString()}`);

      if (topic === topic1) {
          document.getElementById("mqtt-data-1").innerText = message.toString();
      } else if (topic === topic2) {
          document.getElementById("mqtt-data-2").innerText = message.toString();
      }
  });

  // Manejar errores
  client.on("error", (error) => {
      console.error("ðŸš¨ Error de conexiÃ³n:", error);
  });

  // Manejar desconexiÃ³n
  client.on("close", () => {
      console.log("ðŸ”´ Desconectado de HiveMQ Cloud");
  });
</script>
<!-- topicos -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- GRAFICO 1 
<script>
  function crearGrafico(id, label, datos, color) {
      const ctx = document.getElementById(id).getContext('2d');
      new Chart(ctx, {
          type: 'bar',
          data: {
              labels: ['0 hs - 6 hs', '7 hs - 12 hs', '13 hs - 18 hs', '19 hs - 24 hs'],
              datasets: [{
                  label: label,
                  data: datos,
                  backgroundColor: color,
                  borderColor: color.replace('0.5', '1'),
                  borderWidth: 1
              }]
          },
          options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                  y: { beginAtZero: true }
              }
          }
      });
  }

  crearGrafico('grafico1', 'Temperatura Ambiente', [10, 20, 30, 40], 'rgba(54, 162, 235, 0.5)');
  crearGrafico('grafico2', 'Humedad Relativa', [25, 50, 75, 90 ], 'rgba(255, 99, 132, 0.5)');
</script>
-->


</body>
</html>